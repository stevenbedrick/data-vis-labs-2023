<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Alison Hill, with (slight) modifications by Steven Bedrick" />


<title>Lab 02: MoMA Museum Tour</title>

<script src="site_libs/header-attrs-2.20/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>





<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">BMI 5/625 Labs, Spring 2023</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="slides.html">Slides &amp; Reading</a>
</li>
<li>
  <a href="data-vis-resources.html">Resources</a>
</li>
<li>
  <a href="https://sakai.ohsu.edu/portal/site/BMI-525-1-AK-Sp23">Sakai</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="about.html">About</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Lab 02: MoMA Museum Tour</h1>
<h3 class="subtitle">BMI 5/625</h3>
<h4 class="author">Alison Hill, with (slight) modifications by Steven
Bedrick</h4>

</div>


<div id="goals-for-lab-02" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Goals for Lab 02</h1>
<ul>
<li>Review <code>dplyr</code> functions learned last week</li>
<li>Practice using <code>dplyr</code> functions to get to know a new
dataset</li>
<li>Map global plot aesthetics to variables in <code>ggplot2</code></li>
<li>Create facetted plots with <code>ggplot2</code></li>
</ul>
</div>
<div id="slides-for-today" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Slides for today</h1>
<pre class="r"><code>knitr::include_url(&quot;slides/02-slides.html&quot;)</code></pre>
<iframe src="slides/02-slides.html" width="672" height="400px" data-external="1">
</iframe>
</div>
<div id="inspiration-data" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Inspiration + data</h1>
<p>We’ll use data from the Museum of Modern Art (MoMA)</p>
<ul>
<li>Publicly available on <a
href="https://github.com/MuseumofModernArt/collection">GitHub</a></li>
<li>As analyzed by <a
href="https://fivethirtyeight.com/features/a-nerds-guide-to-the-2229-paintings-at-moma/">fivethirtyeight.com</a></li>
<li>And by <a
href="https://medium.com/@foe/here-s-a-roundup-of-how-people-have-used-our-data-so-far-80862e4ce220">others</a></li>
</ul>
</div>
<div id="packages-needed" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Packages needed</h1>
<pre class="r"><code>library(here) # to set file path if working from local file
library(tidyverse) # readr, ggplot2, dplyr
library(dplyr) # just to make sure that dplyr&#39;s summarise, count, etc. &quot;win&quot;</code></pre>
</div>
<div id="read-in-the-data" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Read in the data</h1>
<p>Note! This is not the original data- We did a lot of cleaning and
decision-making in the pre-processing, and stored the result in
<code>data/artworks-cleaned.csv</code>. The below contains only
paintings and drawings in the MoMA collection.</p>
<p>The finished data set is available at <a
href="https://stevenbedrick.github.io/data-vis-labs-2023/data/artworks.csv">here</a>,
and is also present locally in the RStudio Cloud project:</p>
<pre class="r"><code>library(here)
library(readr)
moma &lt;- read_csv(here::here(&quot;data&quot;, &quot;artworks-cleaned.csv&quot;))</code></pre>
</div>
<div id="know-your-data" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Know your data</h1>
<div class="panel panel-success">
<div class="panel-heading">
Challenge #1:
</div>
<div class="panel-body">
<p>Try to answer all of these questions using <code>dplyr</code>.
Answers are below but try them on your own first!</p>
<ol style="list-style-type: decimal">
<li>How many paintings (rows) are in <code>moma</code>? How many
variables (columns) are in <code>moma</code>?</li>
<li>What is the first painting acquired by MoMA? Which year? Which
artist? What title?</li>
<li>What is the oldest painting in the collection? Which year? Which
artist? What title?</li>
<li>How many distinct artists are there?</li>
<li>Which artist has the most paintings in the collection? How many
paintings are by this artist?</li>
<li>How many paintings by male vs female artists?</li>
</ol>
<p>If you want more:</p>
<ol style="list-style-type: decimal">
<li>How many artists of each gender are there?</li>
<li>In what year were the most paintings acquired? Created?</li>
<li>In what year was the first painting by a (solo) female artist
acquired? When was that painting created? Which artist? What title?
</div></li>
</ol>
</div>
<div id="how-many-paintings" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> How many
paintings?</h2>
<ul>
<li>How many rows/observations are in <code>moma</code>?</li>
<li>How many variables are in <code>moma</code>?</li>
</ul>
<p class="text-info">
<strong>Hint:</strong> These questions can be answered using the
<code>dplyr</code> function <code>glimpse</code>.
</p>
<pre class="r"><code>library(dplyr)
moma</code></pre>
<pre><code># A tibble: 2,253 × 23
   title  artist artis…¹ artis…² artis…³ num_a…⁴ n_fem…⁵ n_mal…⁶ artis…⁷ year_…⁸
   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;
 1 &quot;Rope… Joan … (Spani…    1893    1983       1       0       1 Male       1936
 2 &quot;Fire… Paul … (Germa…    1879    1940       1       0       1 Male       1970
 3 &quot;Port… Paul … (Germa…    1879    1940       1       0       1 Male       1966
 4 &quot;Guit… Pablo… (Spani…    1881    1973       1       0       1 Male       1955
 5 &quot;Gran… Arthu… (Ameri…    1880    1946       1       0       1 Male       1939
 6 &quot;\&quot;M&#39;… Franc… (Frenc…    1879    1953       1       0       1 Male       1968
 7 &quot;Unti… Blink… (Germa…    1943    1977       1       0       1 Male       1997
 8 &quot;Dayl… Pierr… (Frenc…    1880    1950       1       0       1 Male       1931
 9 &quot;The … Paul … (Frenc…    1839    1906       1       0       1 Male       1934
10 &quot;Synt… Enric… (Itali…    1894    1956       1       0       1 Male       1941
# … with 2,243 more rows, 13 more variables: year_created &lt;dbl&gt;,
#   circumference_cm &lt;lgl&gt;, depth_cm &lt;dbl&gt;, diameter_cm &lt;lgl&gt;, height_cm &lt;dbl&gt;,
#   length_cm &lt;lgl&gt;, width_cm &lt;dbl&gt;, seat_height_cm &lt;lgl&gt;, purchase &lt;lgl&gt;,
#   gift &lt;lgl&gt;, exchange &lt;lgl&gt;, classification &lt;chr&gt;, department &lt;chr&gt;, and
#   abbreviated variable names ¹​artist_bio, ²​artist_birth_year,
#   ³​artist_death_year, ⁴​num_artists, ⁵​n_female_artists, ⁶​n_male_artists,
#   ⁷​artist_gender, ⁸​year_acquired</code></pre>
<pre class="r"><code>glimpse(moma)</code></pre>
<pre><code>Rows: 2,253
Columns: 23
$ title             &lt;chr&gt; &quot;Rope and People, I&quot;, &quot;Fire in the Evening&quot;, &quot;Portra…
$ artist            &lt;chr&gt; &quot;Joan Miró&quot;, &quot;Paul Klee&quot;, &quot;Paul Klee&quot;, &quot;Pablo Picass…
$ artist_bio        &lt;chr&gt; &quot;(Spanish, 1893–1983)&quot;, &quot;(German, born Switzerland. …
$ artist_birth_year &lt;dbl&gt; 1893, 1879, 1879, 1881, 1880, 1879, 1943, 1880, 1839…
$ artist_death_year &lt;dbl&gt; 1983, 1940, 1940, 1973, 1946, 1953, 1977, 1950, 1906…
$ num_artists       &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
$ n_female_artists  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ n_male_artists    &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
$ artist_gender     &lt;chr&gt; &quot;Male&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Mal…
$ year_acquired     &lt;dbl&gt; 1936, 1970, 1966, 1955, 1939, 1968, 1997, 1931, 1934…
$ year_created      &lt;dbl&gt; 1935, 1929, 1927, 1919, 1925, 1919, 1970, 1929, 1885…
$ circumference_cm  &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ depth_cm          &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ diameter_cm       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ height_cm         &lt;dbl&gt; 104.8, 33.8, 60.3, 215.9, 50.8, 129.2, 200.0, 54.6, …
$ length_cm         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ width_cm          &lt;dbl&gt; 74.6, 33.3, 36.8, 78.7, 54.0, 89.9, 200.0, 38.1, 96.…
$ seat_height_cm    &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ purchase          &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FAL…
$ gift              &lt;lgl&gt; TRUE, FALSE, FALSE, TRUE, TRUE, FALSE, TRUE, TRUE, F…
$ exchange          &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, TRUE, FALSE, FALSE, FALS…
$ classification    &lt;chr&gt; &quot;Painting&quot;, &quot;Painting&quot;, &quot;Painting&quot;, &quot;Painting&quot;, &quot;Pai…
$ department        &lt;chr&gt; &quot;Painting &amp; Sculpture&quot;, &quot;Painting &amp; Sculpture&quot;, &quot;Pai…</code></pre>
<p>There are 2253 paintings in <code>moma</code>.</p>
</div>
<div id="what-is-the-first-painting-acquired" class="section level2"
number="6.2">
<h2><span class="header-section-number">6.2</span> What is the first
painting acquired?</h2>
<ul>
<li>What is the first painting acquired by MoMA (since they started
tracking)?</li>
<li>What year was it acquired?</li>
<li>Which artist?</li>
<li>What title?</li>
</ul>
<p class="text-info">
<strong>Hint:</strong> These questions can be answered by combining two
<code>dplyr</code> functions: <code>select</code> and
<code>arrange</code>.
</p>
<pre class="r"><code>moma %&gt;% 
  select(artist, title, year_acquired) %&gt;% 
  arrange(year_acquired)</code></pre>
<pre><code># A tibble: 2,253 × 3
   artist            title                                               year_…¹
   &lt;chr&gt;             &lt;chr&gt;                                                 &lt;dbl&gt;
 1 Edward Hopper     House by the Railroad                                  1930
 2 Bernard Karfiol   Seated Nude                                            1930
 3 Pierre Roy        Daylight Savings Time                                  1931
 4 Preston Dickinson Plums on a Plate                                       1931
 5 Otto Dix          Dr. Mayer-Hermann                                      1932
 6 Paul Cézanne      The Bather                                             1934
 7 Paul Cézanne      Pines and Rocks (Fontainebleau?)                       1934
 8 Paul Cézanne      Still Life with Ginger Jar, Sugar Bowl, and Oranges    1934
 9 Paul Cézanne      Still Life with Apples                                 1934
10 Arthur B. Davies  Italian Landscape                                      1934
# … with 2,243 more rows, and abbreviated variable name ¹​year_acquired</code></pre>
</div>
<div id="what-is-the-oldest-painting-in-the-moma-collection"
class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> What is the oldest
painting in the MoMA collection?</h2>
<ul>
<li>What is the oldest painting in the MoMA collection historically
(since they started tracking)?</li>
<li>What year was it created?</li>
<li>Which artist?</li>
<li>What title?</li>
</ul>
<p class="text-info">
<strong>Hint:</strong> These questions can be answered by combining two
<code>dplyr</code> functions: <code>select</code> and
<code>arrange</code>.
</p>
<pre class="r"><code>moma %&gt;% 
  select(artist, title, year_created) %&gt;% 
  arrange(year_created)</code></pre>
<pre><code># A tibble: 2,253 × 3
   artist       title                                    year_created
   &lt;chr&gt;        &lt;chr&gt;                                           &lt;dbl&gt;
 1 Odilon Redon Landscape at Daybreak                            1872
 2 Odilon Redon Apache (Man on Horseback)                        1875
 3 Odilon Redon Apache (Man on Horseback II)                     1875
 4 Odilon Redon Fishing Boat                                     1875
 5 Odilon Redon Rocky Peak                                       1875
 6 Odilon Redon The Rocky Slope                                  1875
 7 Odilon Redon Landscape with Rocks, near Royan                 1875
 8 Paul Cézanne Still Life with Fruit Dish                       1879
 9 Paul Cézanne L&#39;Estaque                                        1879
10 Claude Monet On the Cliff at Pourville, Clear Weather         1882
# … with 2,243 more rows</code></pre>
<p>To do inline comments, I could say that the oldest painting is
Landscape at Daybreak, painted by Odilon Redon in 1872.</p>
</div>
<div id="how-many-artists" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> How many
artists?</h2>
<ul>
<li>How many distinct artists are there?</li>
</ul>
<p class="text-info">
<strong>Hint:</strong> Try <code>dplyr::distinct</code>.
</p>
<pre class="r"><code>moma %&gt;% 
  distinct(artist)</code></pre>
<pre><code># A tibble: 989 × 1
   artist           
   &lt;chr&gt;            
 1 Joan Miró        
 2 Paul Klee        
 3 Pablo Picasso    
 4 Arthur Dove      
 5 Francis Picabia  
 6 Blinky Palermo   
 7 Pierre Roy       
 8 Paul Cézanne     
 9 Enrico Prampolini
10 Jankel Adler     
# … with 979 more rows</code></pre>
<p>You could add a <code>tally()</code> too to get just the number of
rows. You can also then use <code>pull()</code> to get that single
number out of the tibble:</p>
<pre class="r"><code>num_artists &lt;- moma %&gt;% 
  distinct(artist) %&gt;% 
  tally() %&gt;% 
  pull()
num_artists</code></pre>
<pre><code>[1] 989</code></pre>
<p>Then I can refer to this number in inline comments like: there are
989 total.</p>
</div>
<div id="which-artist-has-the-most-paintings" class="section level2"
number="6.5">
<h2><span class="header-section-number">6.5</span> Which artist has the
most paintings?</h2>
<ul>
<li>Which artist has the most paintings ever owned by
<code>moma</code>?</li>
<li>How many paintings in the MoMA collection by that artist?</li>
</ul>
<p class="text-info">
<strong>Hint:</strong> Try <code>dplyr::count</code>. Use
<code>?count</code> to figure out how to sort the output.
</p>
<pre class="r"><code>moma %&gt;% 
  count(artist, sort = TRUE)</code></pre>
<pre><code># A tibble: 989 × 2
   artist               n
   &lt;chr&gt;            &lt;int&gt;
 1 Pablo Picasso       55
 2 Henri Matisse       32
 3 On Kawara           32
 4 Jacob Lawrence      30
 5 Batiste Madalena    25
 6 Jean Dubuffet       25
 7 Odilon Redon        25
 8 Ben Vautier         24
 9 Frank Stella        23
10 Philip Guston       23
# … with 979 more rows</code></pre>
<p>In the <code>?count</code> documentation, it says:
“<code>count</code> and <code>tally</code> are designed so that you can
call them repeatedly, each time rolling up a level of detail.” Try
running <code>count()</code> again (leave parentheses empty) on your
last code chunk.</p>
<pre class="r"><code>moma %&gt;% 
  count(artist, sort = TRUE) %&gt;% 
  count()</code></pre>
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1   989</code></pre>
</div>
<div id="how-many-paintings-by-male-vs-female-artists"
class="section level2" number="6.6">
<h2><span class="header-section-number">6.6</span> How many paintings by
male vs female artists?</h2>
<pre class="r"><code>moma %&gt;% 
  count(artist_gender)</code></pre>
<pre><code># A tibble: 3 × 2
  artist_gender     n
  &lt;chr&gt;         &lt;int&gt;
1 Female          252
2 Male           1991
3 &lt;NA&gt;             10</code></pre>
<p>Now together we’ll count the number of artists by gender. You’ll need
to give <code>count</code> two variable names in the parentheses:
<code>artist_gender</code> and <code>artist</code>.</p>
<pre class="r"><code>moma %&gt;% 
  count(artist_gender, artist, sort = TRUE) </code></pre>
<pre><code># A tibble: 989 × 3
   artist_gender artist               n
   &lt;chr&gt;         &lt;chr&gt;            &lt;int&gt;
 1 Male          Pablo Picasso       55
 2 Male          Henri Matisse       32
 3 Male          On Kawara           32
 4 Male          Jacob Lawrence      30
 5 Male          Batiste Madalena    25
 6 Male          Jean Dubuffet       25
 7 Male          Odilon Redon        25
 8 Male          Ben Vautier         24
 9 Male          Frank Stella        23
10 Male          Philip Guston       23
# … with 979 more rows</code></pre>
<p>This output is not superhelpful as we already know that Pablo Picasso
has 55 paintings in the MoMA collection. But how can we find out which
female artist has the most paintings? We have a few options. Let’s first
add a <code>filter</code> for females.</p>
<pre class="r"><code>moma %&gt;% 
  count(artist_gender, artist, sort = TRUE) %&gt;% 
  filter(artist_gender == &quot;Female&quot;)</code></pre>
<pre><code># A tibble: 143 × 3
   artist_gender artist                    n
   &lt;chr&gt;         &lt;chr&gt;                 &lt;int&gt;
 1 Female        Sherrie Levine           12
 2 Female        Agnes Martin              9
 3 Female        Elizabeth Murray          8
 4 Female        Susan Rothenberg          8
 5 Female        Joan Mitchell             6
 6 Female        Loren MacIver             6
 7 Female        R. H. Quaytman            6
 8 Female        Helen Frankenthaler       5
 9 Female        Georgia O&#39;Keeffe          4
10 Female        Lynette Yiadom-Boakye     4
# … with 133 more rows</code></pre>
<p>Another option is to use another <code>dplyr</code> function called
<code>top_n()</code>. Use <code>?top_n</code> to see how it works. How
it won’t work in this context:</p>
<pre class="r"><code>moma %&gt;% 
  count(artist_gender, artist, sort = TRUE) %&gt;% 
  top_n(2)</code></pre>
<pre><code># A tibble: 3 × 3
  artist_gender artist            n
  &lt;chr&gt;         &lt;chr&gt;         &lt;int&gt;
1 Male          Pablo Picasso    55
2 Male          Henri Matisse    32
3 Male          On Kawara        32</code></pre>
<p>How it will work better is following a
<code>group_by(artist_gender)</code>:</p>
<pre class="r"><code>moma %&gt;% 
  count(artist_gender, artist, sort = TRUE) %&gt;% 
  group_by(artist_gender) %&gt;% 
  top_n(1)</code></pre>
<pre><code># A tibble: 3 × 3
# Groups:   artist_gender [3]
  artist_gender artist                                                 n
  &lt;chr&gt;         &lt;chr&gt;                                              &lt;int&gt;
1 Male          Pablo Picasso                                         55
2 Female        Sherrie Levine                                        12
3 &lt;NA&gt;          Gilbert &amp; George, Gilbert Proesch, George Passmore     2</code></pre>
<p>Now we can see that Sherrie Levine has 12 paintings. This is a pretty
far cry from the 55 paintings by Pablo Picasso.</p>
</div>
<div id="how-many-artists-of-each-gender-are-there"
class="section level2" number="6.7">
<h2><span class="header-section-number">6.7</span> How many artists of
each gender are there?</h2>
<p>This is a harder question to answer than you think! This is because
the level of observation in our current <code>moma</code> dataset is
<em>unique paintings</em>. We have multiple paintings done by the same
artists though, so counting just the number of unique paintings is
different than counting the number of unique artists.</p>
<p>Remember how <code>count</code> can be used back-to-back to roll up a
level of detail? Try running <code>count(artist_gender)</code> again on
your last code chunk.</p>
<pre class="r"><code>moma %&gt;% 
  count(artist_gender, artist) %&gt;% 
  count(artist_gender)</code></pre>
<pre><code># A tibble: 3 × 2
  artist_gender     n
  &lt;chr&gt;         &lt;int&gt;
1 Female          143
2 Male            837
3 &lt;NA&gt;              9</code></pre>
<p>This output takes the previous table (made with
<code>count(artist_gender, artist)</code>), and essentially ignores the
<code>n</code> column. So we no longer care about how <em>many</em>
paintings each individual artist created. Instead, we want to
<code>count</code> the rows in this <em>new</em> table where each row is
a unique artist. By counting by <code>artist_gender</code> in the last
line, we are grouping by levels of that variable (so
Female/Male/<code>NA</code>) and <code>nn</code> is the number of unique
artists for each gender category recorded.</p>
</div>
<div id="when-were-the-most-paintings-in-the-collection-acquired"
class="section level2" number="6.8">
<h2><span class="header-section-number">6.8</span> When were the most
paintings in the collection acquired?</h2>
<p class="text-info">
<strong>Hint:</strong> Try <code>dplyr::count</code>. Use
<code>?count</code> to figure out how to sort the output.
</p>
<pre class="r"><code>moma %&gt;% 
  count(year_acquired, sort = TRUE)</code></pre>
<pre><code># A tibble: 88 × 2
   year_acquired     n
           &lt;dbl&gt; &lt;int&gt;
 1          1985    86
 2          1942    71
 3          1979    71
 4          1991    67
 5          2005    67
 6          1967    65
 7          2008    55
 8          1961    45
 9          1969    45
10          1956    42
# … with 78 more rows</code></pre>
</div>
<div id="when-were-the-most-paintings-in-the-collection-created"
class="section level2" number="6.9">
<h2><span class="header-section-number">6.9</span> When were the most
paintings in the collection created?</h2>
<p class="text-info">
<strong>Hint:</strong> Try <code>dplyr::count</code>. Use
<code>?count</code> to figure out how to sort the output.
</p>
<pre class="r"><code>moma %&gt;% 
  count(year_created, sort = TRUE)</code></pre>
<pre><code># A tibble: 139 × 2
   year_created     n
          &lt;dbl&gt; &lt;int&gt;
 1         1977    57
 2         1940    56
 3         1964    56
 4         1961    50
 5         1962    49
 6         1963    44
 7         1959    42
 8         1968    40
 9         1960    39
10         1914    37
# … with 129 more rows</code></pre>
</div>
<div id="what-about-the-first-painting-by-a-solo-female-artist"
class="section level2" number="6.10">
<h2><span class="header-section-number">6.10</span> What about the first
painting by a solo female artist?</h2>
<p class="text-info">
<strong>Hint:</strong> Try combining three <code>dplyr</code> functions:
<code>filter</code>, <code>select</code>, and <code>arrange</code>.
</p>
<p>When was the first painting by a solo female artist acquired?</p>
<pre class="r"><code>moma %&gt;% 
  filter(num_artists == 1 &amp; n_female_artists == 1) %&gt;% 
  select(title, artist, year_acquired, year_created) %&gt;% 
  arrange(year_acquired)</code></pre>
<pre><code># A tibble: 252 × 4
   title                           artist                  year_acquired year_…¹
   &lt;chr&gt;                           &lt;chr&gt;                           &lt;dbl&gt;   &lt;dbl&gt;
 1 Landscape, 47                   Natalia Goncharova               1937    1912
 2 Shack                           Loren MacIver                    1938    1934
 3 Hopscotch                       Loren MacIver                    1940    1940
 4 Shadows with Painting           Irene Rice Pereira               1941    1940
 5 Figure                          Varvara Stepanova                1941    1921
 6 Still Life in Red               Amelia Peláez Del Casal          1942    1938
 7 White Lines                     Irene Rice Pereira               1942    1942
 8 Musical Squash                  Maud Morgan                      1942    1942
 9 Desolation                      Raquel Forner                    1942    1942
10 Self-Portrait with Cropped Hair Frida Kahlo                      1943    1940
# … with 242 more rows, and abbreviated variable name ¹​year_created</code></pre>
<p>What is the oldest painting by a solo female artist, and when was it
created?</p>
<pre class="r"><code>moma %&gt;% 
  filter(num_artists == 1 &amp; n_female_artists == 1) %&gt;% 
  select(title, artist, year_acquired, year_created) %&gt;% 
  arrange(year_created)</code></pre>
<pre><code># A tibble: 252 × 4
   title                                                  artist year_…¹ year_…²
   &lt;chr&gt;                                                  &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;
 1 Self-Portrait with Two Flowers in Her Raised Left Hand Paula…    2017    1907
 2 Girl with Bare Shoulders                               Gwen …    1958    1909
 3 Girl Reading at a Window                               Gwen …    1971    1911
 4 Landscape, 47                                          Natal…    1937    1912
 5 Cubist Nude                                            Alexa…    1991    1912
 6 Rayonism, Blue-Green Forest                            Natal…    1985    1913
 7 The Factory and the Bridge                             Olga …    1985    1913
 8 Subject from a Dyer&#39;s Shop                             Lyubo…    1985    1914
 9 Portuguese Market                                      Sonia…    1955    1915
10 Girl with a Blue Scarf                                 Gwen …    1963    1915
# … with 242 more rows, and abbreviated variable names ¹​year_acquired,
#   ²​year_created</code></pre>
<pre class="r"><code># or, because artist_gender is missing when num_artists &gt; 1
moma %&gt;% 
  filter(artist_gender == &quot;Female&quot;) %&gt;% 
  select(title, artist, year_acquired, year_created) %&gt;% 
  arrange(year_acquired)</code></pre>
</div>
</div>
<div id="basics-of-ggplot2" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Basics of
<code>ggplot2</code></h1>
<div class="panel panel-success">
<div class="panel-heading">
Challenge #2:
</div>
<div class="panel-body">
We’ll do this together <em>(nothing to turn in)</em>: see <a
href="https://stevenbedrick.github.io/data-vis-labs-2023/slides/02-slides.html#16">slides</a>.
</div>
</div>
</div>
<div id="plot-your-data" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Plot your data</h1>
<div id="plot-year-painted-vs-year-acquired" class="section level2"
number="8.1">
<h2><span class="header-section-number">8.1</span> Plot year painted vs
year acquired</h2>
<div class="panel panel-success">
<div class="panel-heading">
Challenge #3:
</div>
<div class="panel-body">
<p>Let’s recreate this plot from <a
href="https://fivethirtyeight.com/features/a-nerds-guide-to-the-2229-paintings-at-moma/">fivethirtyeight</a>
(mostly)!</p>
<p><img
src="https://fivethirtyeight.com/wp-content/uploads/2015/08/roeder-feature-moma-1.png?w=1150" /></p>
<p>Things to consider:</p>
<ul>
<li>You’ll want to play around with setting an <code>alpha</code> value
here- keep in mind that <code>0</code> is totally transparent and
<code>1</code> is opaque.</li>
<li>Try using <code>geom_abline()</code> to add the line in red (use the
default intercept value of 0). The actual red line is difficult to
recreate- here is what the authors say: “The red regression line shows
the “modernizing” of MoMA’s collection — how quickly the museum has
moved toward acquiring recent paintings.”</li>
<li>Go back to <a
href="https://stevenbedrick.github.io/data-vis-labs-2023/01-eda_hot_dogs.html">Lab
01</a> to review how to do the following:
<ul>
<li>Change the x- and y-axis labels and the plot title to match the plot
above</li>
</ul>
</div></li>
</ul>
</div>
<pre class="r"><code>ggplot(moma, aes(year_created, year_acquired)) +
  geom_point(alpha = .1, na.rm = TRUE) +
  geom_abline(intercept = c(0,0), colour = &quot;red&quot;) +
  labs(x = &quot;Year Painted&quot;, y = &quot;Year Acquired&quot;) +
  ggtitle(&quot;MoMA Keeps Its Collection Current&quot;) </code></pre>
<p><img src="02-moma_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
</div>
<div id="facet-by-artist-gender" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> Facet by artist
gender</h2>
<p>Can you make the same plot above, but facet by artist gender?</p>
<p class="text-info">
<strong>Hint:</strong> For this to make sense, you probably want to do
some filtering to select only those paintings where there was one “solo”
artist.
</p>
<pre class="r"><code>moma_solo &lt;- moma %&gt;% 
  filter(num_artists == 1)
ggplot(moma_solo, aes(year_created, year_acquired)) +
  geom_point(alpha = .1) +
  geom_abline(intercept = c(0,0), colour = &quot;red&quot;) +
  labs(x = &quot;Year Painted&quot;, y = &quot;Year Acquired&quot;) +
  ggtitle(&quot;MoMA Keeps Its Collection Current&quot;) +
  facet_wrap(~artist_gender)</code></pre>
<p><img src="02-moma_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
</div>
</div>
<div id="plot-painting-dimensions" class="section level1" number="9">
<h1><span class="header-section-number">9</span> Plot painting
dimensions</h1>
<div class="panel panel-success">
<div class="panel-heading">
Challenge #4:
</div>
<div class="panel-body">
<p>Let’s (somewhat) try to recreate this scatterplot from <a
href="https://fivethirtyeight.com/features/a-nerds-guide-to-the-2229-paintings-at-moma/">fivethirtyeight</a>.</p>
<p><img
src="https://fivethirtyeight.com/wp-content/uploads/2015/08/roeder-feature-moma-3.png?w=1150" /></p>
<p>To recreate, some things to consider:</p>
<ul>
<li>Try filtering all paintings with height less than 600 cm and width
less than 760 cm.</li>
<li>If you want to add color as in the original, you’ll need to create a
new variable using <code>mutate</code>.</li>
</ul>
<p class="text-info">
<strong>Hint:</strong> You’ll probably also want to look into
<code>case_when</code> to create a categorical variable to color by.
</p>
</div>
</div>
<pre class="r"><code>moma_dim &lt;- moma %&gt;% 
  filter(height_cm &lt; 600, width_cm &lt; 760) %&gt;% 
  mutate(hw_ratio = height_cm / width_cm,
         hw_cat = case_when(
           hw_ratio &gt; 1 ~ &quot;taller than wide&quot;,
           hw_ratio &lt; 1 ~ &quot;wider than tall&quot;,
           hw_ratio == 1 ~ &quot;perfect square&quot;
         ))
library(ggthemes)
ggplot(moma_dim, aes(x = width_cm, y = height_cm, colour = hw_cat)) +
  geom_point(alpha = .5) +
  ggtitle(&quot;MoMA Paintings, Tall and Wide&quot;) +
  scale_colour_manual(name = &quot;&quot;,
                      values = c(&quot;gray50&quot;, &quot;#FF9900&quot;, &quot;#B14CF0&quot;)) +
  theme_fivethirtyeight() +
  theme(axis.title = element_text()) +
  labs(x = &quot;Width&quot;, y = &quot;Height&quot;) </code></pre>
<p><img src="02-moma_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p>Those colors are intense! Would different ones work better?</p>
<pre class="r"><code>library(ggthemes)
ggplot(moma_dim, aes(x = width_cm, y = height_cm, colour = hw_cat)) +
  geom_point(alpha = .5) +
  ggtitle(&quot;MoMA Paintings, Tall and Wide&quot;) +
  scale_colour_manual(name = &quot;&quot;,
                      values = c(&quot;gray50&quot;, &quot;#ee5863&quot;, &quot;#6999cd&quot;)) +
  theme_fivethirtyeight() +
  theme(axis.title = element_text()) +
  labs(x = &quot;Width&quot;, y = &quot;Height&quot;) </code></pre>
<p><img src="02-moma_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<p>We could also do away with the legend and use
<code>geom_annotate</code> instead.</p>
<pre class="r"><code>library(ggthemes)
ggplot(moma_dim, aes(x = width_cm, y = height_cm, colour = hw_cat)) +
  geom_point(alpha = .5, show.legend = FALSE) +
  ggtitle(&quot;MoMA Paintings, Tall and Wide&quot;) +
  scale_colour_manual(name = &quot;&quot;,
                      values = c(&quot;gray50&quot;, &quot;#ee5863&quot;, &quot;#6999cd&quot;)) +
  theme_fivethirtyeight() +
  theme(axis.title = element_text()) +
  labs(x = &quot;Width&quot;, y = &quot;Height&quot;) +
  annotate(x = 200, y = 380, geom = &quot;text&quot;, 
           label = &quot;Taller than\nWide&quot;, color = &quot;#ee5863&quot;, 
           size = 5, family = &quot;Lato&quot;, hjust = 1, fontface = 2) +
    annotate(x = 375, y = 100, geom = &quot;text&quot;, 
             label = &quot;Wider than\nTall&quot;, color = &quot;#6999cd&quot;, 
             size = 5, family = &quot;Lato&quot;, hjust = 0, fontface = 2)</code></pre>
<p><img src="02-moma_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
</div>
<div id="plot-something-new-different" class="section level1"
number="10">
<h1><span class="header-section-number">10</span> Plot something new
&amp; different!</h1>
<div class="panel panel-success">
<div class="panel-heading">
Challenge #5:
</div>
<div class="panel-body">
<p>It can be anything- you can change colors, add annotations, switch
the geoms, add new variables to examine- the world is your oyster! The
only requirements are:</p>
<ol style="list-style-type: decimal">
<li>You <em>make</em> one new plot that is original, and</li>
<li>You <em>write</em> 1-2 sentences to present the plot and why it
makes sense. What questions do you think your plot can help you to
answer?</li>
</ol>
It does not have to be pretty right now, but it must make sense as a
visualization- you must be able to intelligently and succintly tell us
about it in real words.
</div>
</div>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAnTGFiIDAyOiBNb01BIE11c2V1bSBUb3VyJwphdXRob3I6ICJBbGlzb24gSGlsbCwgd2l0aCAoc2xpZ2h0KSBtb2RpZmljYXRpb25zIGJ5IFN0ZXZlbiBCZWRyaWNrIgpzdWJ0aXRsZTogQk1JIDUvNjI1Cm91dHB1dDoKICAjIHBkZl9kb2N1bWVudDoKICAjICAgdG9jOiB5ZXMKICAjICAgdG9jX2RlcHRoOiAnMicKICBodG1sX2RvY3VtZW50OgogICAgdGhlbWU6IGZsYXRseQogICAgdG9jOiB5ZXMKICAgIHRvY19mbG9hdDogeWVzCiAgICB0b2NfZGVwdGg6IDIKICAgIG51bWJlcl9zZWN0aW9uczogeWVzCiAgICBjb2RlX2ZvbGRpbmc6IGhpZGUKICAgIGNvZGVfZG93bmxvYWQ6IHllcwotLS0KYGBge3Igc2V0dXAsIGluY2x1ZGUgPSBGQUxTRSwgY2FjaGUgPSBGQUxTRX0Ka25pdHI6Om9wdHNfY2h1bmskc2V0KGVycm9yID0gVFJVRSwgY29tbWVudCA9IE5BLCB3YXJuaW5nID0gRkFMU0UsIGVycm9ycyA9IEZBTFNFLCBtZXNzYWdlID0gRkFMU0UsIHRpZHkgPSBGQUxTRSwgY2FjaGUgPSBGQUxTRSkKYGBgCgojIEdvYWxzIGZvciBMYWIgMDIKCi0gUmV2aWV3IGBkcGx5cmAgZnVuY3Rpb25zIGxlYXJuZWQgbGFzdCB3ZWVrCi0gUHJhY3RpY2UgdXNpbmcgYGRwbHlyYCBmdW5jdGlvbnMgdG8gZ2V0IHRvIGtub3cgYSBuZXcgZGF0YXNldAotIE1hcCBnbG9iYWwgcGxvdCBhZXN0aGV0aWNzIHRvIHZhcmlhYmxlcyBpbiBgZ2dwbG90MmAKLSBDcmVhdGUgZmFjZXR0ZWQgcGxvdHMgd2l0aCBgZ2dwbG90MmAKCiMgU2xpZGVzIGZvciB0b2RheQoKYGBge3J9CmtuaXRyOjppbmNsdWRlX3VybCgic2xpZGVzLzAyLXNsaWRlcy5odG1sIikKYGBgCgoKCgojIEluc3BpcmF0aW9uICsgZGF0YQoKV2UnbGwgdXNlIGRhdGEgZnJvbSB0aGUgTXVzZXVtIG9mIE1vZGVybiBBcnQgKE1vTUEpCgotIFB1YmxpY2x5IGF2YWlsYWJsZSBvbiBbR2l0SHViXShodHRwczovL2dpdGh1Yi5jb20vTXVzZXVtb2ZNb2Rlcm5BcnQvY29sbGVjdGlvbikKLSBBcyBhbmFseXplZCBieSBbZml2ZXRoaXJ0eWVpZ2h0LmNvbV0oaHR0cHM6Ly9maXZldGhpcnR5ZWlnaHQuY29tL2ZlYXR1cmVzL2EtbmVyZHMtZ3VpZGUtdG8tdGhlLTIyMjktcGFpbnRpbmdzLWF0LW1vbWEvKQotIEFuZCBieSBbb3RoZXJzXShodHRwczovL21lZGl1bS5jb20vQGZvZS9oZXJlLXMtYS1yb3VuZHVwLW9mLWhvdy1wZW9wbGUtaGF2ZS11c2VkLW91ci1kYXRhLXNvLWZhci04MDg2MmU0Y2UyMjApCgojIFBhY2thZ2VzIG5lZWRlZAoKYGBge3J9CmxpYnJhcnkoaGVyZSkgIyB0byBzZXQgZmlsZSBwYXRoIGlmIHdvcmtpbmcgZnJvbSBsb2NhbCBmaWxlCmxpYnJhcnkodGlkeXZlcnNlKSAjIHJlYWRyLCBnZ3Bsb3QyLCBkcGx5cgpsaWJyYXJ5KGRwbHlyKSAjIGp1c3QgdG8gbWFrZSBzdXJlIHRoYXQgZHBseXIncyBzdW1tYXJpc2UsIGNvdW50LCBldGMuICJ3aW4iCmBgYAoKCiMgUmVhZCBpbiB0aGUgZGF0YQoKTm90ZSEgVGhpcyBpcyBub3QgdGhlIG9yaWdpbmFsIGRhdGEtIFdlIGRpZCBhIGxvdCBvZiBjbGVhbmluZyBhbmQgZGVjaXNpb24tbWFraW5nIGluIHRoZSBwcmUtcHJvY2Vzc2luZywgYW5kIHN0b3JlZCB0aGUgcmVzdWx0IGluIGBkYXRhL2FydHdvcmtzLWNsZWFuZWQuY3N2YC4gVGhlIGJlbG93IGNvbnRhaW5zIG9ubHkgcGFpbnRpbmdzIGFuZCBkcmF3aW5ncyBpbiB0aGUgTW9NQSBjb2xsZWN0aW9uLgoKVGhlIGZpbmlzaGVkIGRhdGEgc2V0IGlzIGF2YWlsYWJsZSBhdCBbaGVyZV0oaHR0cHM6Ly9zdGV2ZW5iZWRyaWNrLmdpdGh1Yi5pby9kYXRhLXZpcy1sYWJzLTIwMjMvZGF0YS9hcnR3b3Jrcy5jc3YpLCBhbmQgaXMgYWxzbyBwcmVzZW50IGxvY2FsbHkgaW4gdGhlIFJTdHVkaW8gQ2xvdWQgcHJvamVjdDoKCmBgYHtyIGV2YWwgPSBGQUxTRX0KbGlicmFyeShoZXJlKQpsaWJyYXJ5KHJlYWRyKQptb21hIDwtIHJlYWRfY3N2KGhlcmU6OmhlcmUoImRhdGEiLCAiYXJ0d29ya3MtY2xlYW5lZC5jc3YiKSkKYGBgCgpgYGB7ciBlY2hvPUZBTFNFfQpsaWJyYXJ5KGhlcmUpCmxpYnJhcnkocmVhZHIpCm1vbWEgPC0gcmVhZF9jc3YoaGVyZTo6aGVyZSgiZGF0YSIsICJhcnR3b3Jrcy1jbGVhbmVkLmNzdiIpKQpgYGAKCiMgS25vdyB5b3VyIGRhdGEKCjxkaXYgY2xhc3M9InBhbmVsIHBhbmVsLXN1Y2Nlc3MiPgogIDxkaXYgY2xhc3M9InBhbmVsLWhlYWRpbmciPkNoYWxsZW5nZSAjMTo8L2Rpdj4KICA8ZGl2IGNsYXNzPSJwYW5lbC1ib2R5Ij4KVHJ5IHRvIGFuc3dlciBhbGwgb2YgdGhlc2UgcXVlc3Rpb25zIHVzaW5nIGBkcGx5cmAuIEFuc3dlcnMgYXJlIGJlbG93IGJ1dCB0cnkgdGhlbSBvbiB5b3VyIG93biBmaXJzdCEKCjEuIEhvdyBtYW55IHBhaW50aW5ncyAocm93cykgYXJlIGluIGBtb21hYD8gSG93IG1hbnkgdmFyaWFibGVzIChjb2x1bW5zKSBhcmUgaW4gYG1vbWFgPwoxLiBXaGF0IGlzIHRoZSBmaXJzdCBwYWludGluZyBhY3F1aXJlZCBieSBNb01BPyBXaGljaCB5ZWFyPyBXaGljaCBhcnRpc3Q/IFdoYXQgdGl0bGU/CjEuIFdoYXQgaXMgdGhlIG9sZGVzdCBwYWludGluZyBpbiB0aGUgY29sbGVjdGlvbj8gV2hpY2ggeWVhcj8gV2hpY2ggYXJ0aXN0PyBXaGF0IHRpdGxlPwoxLiBIb3cgbWFueSBkaXN0aW5jdCBhcnRpc3RzIGFyZSB0aGVyZT8KMS4gV2hpY2ggYXJ0aXN0IGhhcyB0aGUgbW9zdCBwYWludGluZ3MgaW4gdGhlIGNvbGxlY3Rpb24/IEhvdyBtYW55IHBhaW50aW5ncyBhcmUgYnkgdGhpcyBhcnRpc3Q/CjEuIEhvdyBtYW55IHBhaW50aW5ncyBieSBtYWxlIHZzIGZlbWFsZSBhcnRpc3RzPwoKCklmIHlvdSB3YW50IG1vcmU6CgoxLiBIb3cgbWFueSBhcnRpc3RzIG9mIGVhY2ggZ2VuZGVyIGFyZSB0aGVyZT8KMS4gSW4gd2hhdCB5ZWFyIHdlcmUgdGhlIG1vc3QgcGFpbnRpbmdzIGFjcXVpcmVkPyBDcmVhdGVkPwoxLiBJbiB3aGF0IHllYXIgd2FzIHRoZSBmaXJzdCBwYWludGluZyBieSBhIChzb2xvKSBmZW1hbGUgYXJ0aXN0IGFjcXVpcmVkPyBXaGVuIHdhcyB0aGF0IHBhaW50aW5nIGNyZWF0ZWQ/IFdoaWNoIGFydGlzdD8gV2hhdCB0aXRsZT8KICA8L2Rpdj4KPC9kaXY+CgojIyBIb3cgbWFueSBwYWludGluZ3M/CgotIEhvdyBtYW55IHJvd3Mvb2JzZXJ2YXRpb25zIGFyZSBpbiBgbW9tYWA/Ci0gSG93IG1hbnkgdmFyaWFibGVzIGFyZSBpbiBgbW9tYWA/Cgo8cCBjbGFzcz0idGV4dC1pbmZvIj4gX19IaW50Ol9fIFRoZXNlIHF1ZXN0aW9ucyBjYW4gYmUgYW5zd2VyZWQgdXNpbmcgdGhlIGBkcGx5cmAgZnVuY3Rpb24gYGdsaW1wc2VgLjwvcD4KCgpgYGB7cn0KbGlicmFyeShkcGx5cikKbW9tYQpnbGltcHNlKG1vbWEpCmBgYAoKVGhlcmUgYXJlIGByIG5yb3cobW9tYSlgIHBhaW50aW5ncyBpbiBgbW9tYWAuCgojIyBXaGF0IGlzIHRoZSBmaXJzdCBwYWludGluZyBhY3F1aXJlZD8KCgotIFdoYXQgaXMgdGhlIGZpcnN0IHBhaW50aW5nIGFjcXVpcmVkIGJ5IE1vTUEgKHNpbmNlIHRoZXkgc3RhcnRlZCB0cmFja2luZyk/IAotIFdoYXQgeWVhciB3YXMgaXQgYWNxdWlyZWQ/Ci0gV2hpY2ggYXJ0aXN0PwotIFdoYXQgdGl0bGU/Cgo8cCBjbGFzcz0idGV4dC1pbmZvIj4gX19IaW50Ol9fIFRoZXNlIHF1ZXN0aW9ucyBjYW4gYmUgYW5zd2VyZWQgYnkgY29tYmluaW5nIHR3byBgZHBseXJgIGZ1bmN0aW9uczogYHNlbGVjdGAgYW5kIGBhcnJhbmdlYC48L3A+CgoKYGBge3J9Cm1vbWEgJT4lIAogIHNlbGVjdChhcnRpc3QsIHRpdGxlLCB5ZWFyX2FjcXVpcmVkKSAlPiUgCiAgYXJyYW5nZSh5ZWFyX2FjcXVpcmVkKQpgYGAKCiMjIFdoYXQgaXMgdGhlIG9sZGVzdCBwYWludGluZyBpbiB0aGUgTW9NQSBjb2xsZWN0aW9uPwoKCi0gV2hhdCBpcyB0aGUgb2xkZXN0IHBhaW50aW5nIGluIHRoZSBNb01BIGNvbGxlY3Rpb24gaGlzdG9yaWNhbGx5IChzaW5jZSB0aGV5IHN0YXJ0ZWQgdHJhY2tpbmcpPyAKLSBXaGF0IHllYXIgd2FzIGl0IGNyZWF0ZWQ/Ci0gV2hpY2ggYXJ0aXN0PwotIFdoYXQgdGl0bGU/Cgo8cCBjbGFzcz0idGV4dC1pbmZvIj4gX19IaW50Ol9fIFRoZXNlIHF1ZXN0aW9ucyBjYW4gYmUgYW5zd2VyZWQgYnkgY29tYmluaW5nIHR3byBgZHBseXJgIGZ1bmN0aW9uczogYHNlbGVjdGAgYW5kIGBhcnJhbmdlYC48L3A+CgoKCmBgYHtyfQptb21hICU+JSAKICBzZWxlY3QoYXJ0aXN0LCB0aXRsZSwgeWVhcl9jcmVhdGVkKSAlPiUgCiAgYXJyYW5nZSh5ZWFyX2NyZWF0ZWQpCmBgYAoKYGBge3IgaW5jbHVkZSA9IEZBTFNFfQpvbGRlc3QgPC0gbW9tYSAlPiUgCiAgc2VsZWN0KGFydGlzdCwgdGl0bGUsIHllYXJfY3JlYXRlZCkgJT4lIAogIGFycmFuZ2UoeWVhcl9jcmVhdGVkKSAlPiUgCiAgc2xpY2UoMSkKYGBgCgpUbyBkbyBpbmxpbmUgY29tbWVudHMsIEkgY291bGQgc2F5IHRoYXQgdGhlIG9sZGVzdCBwYWludGluZyBpcyBgciBvbGRlc3QgJT4lIHB1bGwodGl0bGUpYCwgcGFpbnRlZCBieSBgciBvbGRlc3QgJT4lIHB1bGwoYXJ0aXN0KWAgaW4gYHIgb2xkZXN0ICU+JSBwdWxsKHllYXJfY3JlYXRlZClgLgoKIyMgSG93IG1hbnkgYXJ0aXN0cz8KCi0gSG93IG1hbnkgZGlzdGluY3QgYXJ0aXN0cyBhcmUgdGhlcmU/Cgo8cCBjbGFzcz0idGV4dC1pbmZvIj4gX19IaW50Ol9fIFRyeSBgZHBseXI6OmRpc3RpbmN0YC48L3A+CiAKCmBgYHtyfQptb21hICU+JSAKICBkaXN0aW5jdChhcnRpc3QpCmBgYAoKWW91IGNvdWxkIGFkZCBhIGB0YWxseSgpYCB0b28gdG8gZ2V0IGp1c3QgdGhlIG51bWJlciBvZiByb3dzLiBZb3UgY2FuIGFsc28gdGhlbiB1c2UgYHB1bGwoKWAgdG8gZ2V0IHRoYXQgc2luZ2xlIG51bWJlciBvdXQgb2YgdGhlIHRpYmJsZToKCmBgYHtyfQpudW1fYXJ0aXN0cyA8LSBtb21hICU+JSAKICBkaXN0aW5jdChhcnRpc3QpICU+JSAKICB0YWxseSgpICU+JSAKICBwdWxsKCkKbnVtX2FydGlzdHMKYGBgCgpUaGVuIEkgY2FuIHJlZmVyIHRvIHRoaXMgbnVtYmVyIGluIGlubGluZSBjb21tZW50cyBsaWtlOiB0aGVyZSBhcmUgYHIgbnVtX2FydGlzdHNgIHRvdGFsLgoKIyMgV2hpY2ggYXJ0aXN0IGhhcyB0aGUgbW9zdCBwYWludGluZ3M/CgotIFdoaWNoIGFydGlzdCBoYXMgdGhlIG1vc3QgcGFpbnRpbmdzIGV2ZXIgb3duZWQgYnkgYG1vbWFgPyAKLSBIb3cgbWFueSBwYWludGluZ3MgaW4gdGhlIE1vTUEgY29sbGVjdGlvbiBieSB0aGF0IGFydGlzdD8KCjxwIGNsYXNzPSJ0ZXh0LWluZm8iPiBfX0hpbnQ6X18gVHJ5IGBkcGx5cjo6Y291bnRgLiBVc2UgYD9jb3VudGAgdG8gZmlndXJlIG91dCBob3cgdG8gc29ydCB0aGUgb3V0cHV0LjwvcD4KCgpgYGB7cn0KbW9tYSAlPiUgCiAgY291bnQoYXJ0aXN0LCBzb3J0ID0gVFJVRSkKYGBgCgpgYGB7ciBpbmNsdWRlID0gRkFMU0V9CnBhYmxvIDwtIG1vbWEgJT4lIAogIGNvdW50KGFydGlzdCwgc29ydCA9IFRSVUUpICU+JSAKICBzbGljZSgxKQpgYGAKCkluIHRoZSBgP2NvdW50YCBkb2N1bWVudGF0aW9uLCBpdCBzYXlzOiAiYGNvdW50YCBhbmQgYHRhbGx5YCBhcmUgZGVzaWduZWQgc28gdGhhdCB5b3UgY2FuIGNhbGwgdGhlbSByZXBlYXRlZGx5LCBlYWNoIHRpbWUgcm9sbGluZyB1cCBhIGxldmVsIG9mIGRldGFpbC4iIFRyeSBydW5uaW5nIGBjb3VudCgpYCBhZ2FpbiAobGVhdmUgcGFyZW50aGVzZXMgZW1wdHkpIG9uIHlvdXIgbGFzdCBjb2RlIGNodW5rLgoKYGBge3J9Cm1vbWEgJT4lIAogIGNvdW50KGFydGlzdCwgc29ydCA9IFRSVUUpICU+JSAKICBjb3VudCgpCmBgYAoKIyMgSG93IG1hbnkgcGFpbnRpbmdzIGJ5IG1hbGUgdnMgZmVtYWxlIGFydGlzdHM/CgoKYGBge3J9Cm1vbWEgJT4lIAogIGNvdW50KGFydGlzdF9nZW5kZXIpCmBgYAoKCk5vdyB0b2dldGhlciB3ZSdsbCBjb3VudCB0aGUgbnVtYmVyIG9mIGFydGlzdHMgYnkgZ2VuZGVyLiBZb3UnbGwgbmVlZCB0byBnaXZlIGBjb3VudGAgdHdvIHZhcmlhYmxlIG5hbWVzIGluIHRoZSBwYXJlbnRoZXNlczogYGFydGlzdF9nZW5kZXJgIGFuZCBgYXJ0aXN0YC4KCmBgYHtyfQptb21hICU+JSAKICBjb3VudChhcnRpc3RfZ2VuZGVyLCBhcnRpc3QsIHNvcnQgPSBUUlVFKSAKYGBgCgpUaGlzIG91dHB1dCBpcyBub3Qgc3VwZXJoZWxwZnVsIGFzIHdlIGFscmVhZHkga25vdyB0aGF0IGByIHBhYmxvICU+JSBwdWxsKGFydGlzdClgIGhhcyBgciBwYWJsbyAlPiUgcHVsbChuKWAgcGFpbnRpbmdzIGluIHRoZSBNb01BIGNvbGxlY3Rpb24uIEJ1dCBob3cgY2FuIHdlIGZpbmQgb3V0IHdoaWNoIGZlbWFsZSBhcnRpc3QgaGFzIHRoZSBtb3N0IHBhaW50aW5ncz8gV2UgaGF2ZSBhIGZldyBvcHRpb25zLiBMZXQncyBmaXJzdCBhZGQgYSBgZmlsdGVyYCBmb3IgZmVtYWxlcy4KCmBgYHtyfQptb21hICU+JSAKICBjb3VudChhcnRpc3RfZ2VuZGVyLCBhcnRpc3QsIHNvcnQgPSBUUlVFKSAlPiUgCiAgZmlsdGVyKGFydGlzdF9nZW5kZXIgPT0gIkZlbWFsZSIpCmBgYAoKQW5vdGhlciBvcHRpb24gaXMgdG8gdXNlIGFub3RoZXIgYGRwbHlyYCBmdW5jdGlvbiBjYWxsZWQgYHRvcF9uKClgLiBVc2UgYD90b3BfbmAgdG8gc2VlIGhvdyBpdCB3b3Jrcy4gSG93IGl0IHdvbid0IHdvcmsgaW4gdGhpcyBjb250ZXh0OgoKYGBge3J9Cm1vbWEgJT4lIAogIGNvdW50KGFydGlzdF9nZW5kZXIsIGFydGlzdCwgc29ydCA9IFRSVUUpICU+JSAKICB0b3BfbigyKQpgYGAKCkhvdyBpdCB3aWxsIHdvcmsgYmV0dGVyIGlzIGZvbGxvd2luZyBhIGBncm91cF9ieShhcnRpc3RfZ2VuZGVyKWA6CgpgYGB7cn0KbW9tYSAlPiUgCiAgY291bnQoYXJ0aXN0X2dlbmRlciwgYXJ0aXN0LCBzb3J0ID0gVFJVRSkgJT4lIAogIGdyb3VwX2J5KGFydGlzdF9nZW5kZXIpICU+JSAKICB0b3BfbigxKQpgYGAKCgpgYGB7ciBpbmNsdWRlID0gRkFMU0V9CnNoZXJyaWUgPC0gbW9tYSAlPiUgCiAgY291bnQoYXJ0aXN0X2dlbmRlciwgYXJ0aXN0LCBzb3J0ID0gVFJVRSkgJT4lIAogIGZpbHRlcihhcnRpc3RfZ2VuZGVyID09ICJGZW1hbGUiKSAlPiUgCiAgc2xpY2UoMSkKYGBgCgpOb3cgd2UgY2FuIHNlZSB0aGF0IGByIHNoZXJyaWUgJT4lIHB1bGwoYXJ0aXN0KWAgaGFzIGByIHNoZXJyaWUgJT4lIHB1bGwobilgIHBhaW50aW5ncy4gVGhpcyBpcyBhIHByZXR0eSBmYXIgY3J5IGZyb20gdGhlIGByIHBhYmxvICU+JSBwdWxsKG4pYCBwYWludGluZ3MgYnkgYHIgcGFibG8gJT4lIHB1bGwoYXJ0aXN0KWAuCgojIyBIb3cgbWFueSBhcnRpc3RzIG9mIGVhY2ggZ2VuZGVyIGFyZSB0aGVyZT8KClRoaXMgaXMgYSBoYXJkZXIgcXVlc3Rpb24gdG8gYW5zd2VyIHRoYW4geW91IHRoaW5rISBUaGlzIGlzIGJlY2F1c2UgdGhlIGxldmVsIG9mIG9ic2VydmF0aW9uIGluIG91ciBjdXJyZW50IGBtb21hYCBkYXRhc2V0IGlzICp1bmlxdWUgcGFpbnRpbmdzKi4gV2UgaGF2ZSBtdWx0aXBsZSBwYWludGluZ3MgZG9uZSBieSB0aGUgc2FtZSBhcnRpc3RzIHRob3VnaCwgc28gY291bnRpbmcganVzdCB0aGUgbnVtYmVyIG9mIHVuaXF1ZSBwYWludGluZ3MgaXMgZGlmZmVyZW50IHRoYW4gY291bnRpbmcgdGhlIG51bWJlciBvZiB1bmlxdWUgYXJ0aXN0cy4gCgpSZW1lbWJlciBob3cgYGNvdW50YCBjYW4gYmUgdXNlZCBiYWNrLXRvLWJhY2sgdG8gcm9sbCB1cCBhIGxldmVsIG9mIGRldGFpbD8gVHJ5IHJ1bm5pbmcgYGNvdW50KGFydGlzdF9nZW5kZXIpYCBhZ2FpbiBvbiB5b3VyIGxhc3QgY29kZSBjaHVuay4KCmBgYHtyfQptb21hICU+JSAKICBjb3VudChhcnRpc3RfZ2VuZGVyLCBhcnRpc3QpICU+JSAKICBjb3VudChhcnRpc3RfZ2VuZGVyKQpgYGAKCgpUaGlzIG91dHB1dCB0YWtlcyB0aGUgcHJldmlvdXMgdGFibGUgKG1hZGUgd2l0aCBgY291bnQoYXJ0aXN0X2dlbmRlciwgYXJ0aXN0KWApLCBhbmQgZXNzZW50aWFsbHkgaWdub3JlcyB0aGUgYG5gIGNvbHVtbi4gU28gd2Ugbm8gbG9uZ2VyIGNhcmUgYWJvdXQgaG93ICptYW55KiBwYWludGluZ3MgZWFjaCBpbmRpdmlkdWFsIGFydGlzdCBjcmVhdGVkLiBJbnN0ZWFkLCB3ZSB3YW50IHRvIGBjb3VudGAgdGhlIHJvd3MgaW4gdGhpcyAqbmV3KiB0YWJsZSB3aGVyZSBlYWNoIHJvdyBpcyBhIHVuaXF1ZSBhcnRpc3QuIEJ5IGNvdW50aW5nIGJ5IGBhcnRpc3RfZ2VuZGVyYCBpbiB0aGUgbGFzdCBsaW5lLCB3ZSBhcmUgZ3JvdXBpbmcgYnkgbGV2ZWxzIG9mIHRoYXQgdmFyaWFibGUgKHNvIEZlbWFsZS9NYWxlL2BOQWApIGFuZCBgbm5gIGlzIHRoZSBudW1iZXIgb2YgdW5pcXVlIGFydGlzdHMgZm9yIGVhY2ggZ2VuZGVyIGNhdGVnb3J5IHJlY29yZGVkLgoKIyMgV2hlbiB3ZXJlIHRoZSBtb3N0IHBhaW50aW5ncyBpbiB0aGUgY29sbGVjdGlvbiBhY3F1aXJlZD8KCgo8cCBjbGFzcz0idGV4dC1pbmZvIj4gX19IaW50Ol9fIFRyeSBgZHBseXI6OmNvdW50YC4gVXNlIGA/Y291bnRgIHRvIGZpZ3VyZSBvdXQgaG93IHRvIHNvcnQgdGhlIG91dHB1dC48L3A+CgpgYGB7cn0KbW9tYSAlPiUgCiAgY291bnQoeWVhcl9hY3F1aXJlZCwgc29ydCA9IFRSVUUpCmBgYAoKIyMgV2hlbiB3ZXJlIHRoZSBtb3N0IHBhaW50aW5ncyBpbiB0aGUgY29sbGVjdGlvbiBjcmVhdGVkPwoKCjxwIGNsYXNzPSJ0ZXh0LWluZm8iPiBfX0hpbnQ6X18gVHJ5IGBkcGx5cjo6Y291bnRgLiBVc2UgYD9jb3VudGAgdG8gZmlndXJlIG91dCBob3cgdG8gc29ydCB0aGUgb3V0cHV0LjwvcD4KCmBgYHtyfQptb21hICU+JSAKICBjb3VudCh5ZWFyX2NyZWF0ZWQsIHNvcnQgPSBUUlVFKQpgYGAKCgojIyBXaGF0IGFib3V0IHRoZSBmaXJzdCBwYWludGluZyBieSBhIHNvbG8gZmVtYWxlIGFydGlzdD8KCgoKPHAgY2xhc3M9InRleHQtaW5mbyI+IF9fSGludDpfXyBUcnkgY29tYmluaW5nIHRocmVlIGBkcGx5cmAgZnVuY3Rpb25zOiBgZmlsdGVyYCwgYHNlbGVjdGAsIGFuZCBgYXJyYW5nZWAuPC9wPgoKV2hlbiB3YXMgdGhlIGZpcnN0IHBhaW50aW5nIGJ5IGEgc29sbyBmZW1hbGUgYXJ0aXN0IGFjcXVpcmVkPwoKYGBge3J9Cm1vbWEgJT4lIAogIGZpbHRlcihudW1fYXJ0aXN0cyA9PSAxICYgbl9mZW1hbGVfYXJ0aXN0cyA9PSAxKSAlPiUgCiAgc2VsZWN0KHRpdGxlLCBhcnRpc3QsIHllYXJfYWNxdWlyZWQsIHllYXJfY3JlYXRlZCkgJT4lIAogIGFycmFuZ2UoeWVhcl9hY3F1aXJlZCkKYGBgCgpXaGF0IGlzIHRoZSBvbGRlc3QgcGFpbnRpbmcgYnkgYSBzb2xvIGZlbWFsZSBhcnRpc3QsIGFuZCB3aGVuIHdhcyBpdCBjcmVhdGVkPwoKYGBge3J9Cm1vbWEgJT4lIAogIGZpbHRlcihudW1fYXJ0aXN0cyA9PSAxICYgbl9mZW1hbGVfYXJ0aXN0cyA9PSAxKSAlPiUgCiAgc2VsZWN0KHRpdGxlLCBhcnRpc3QsIHllYXJfYWNxdWlyZWQsIHllYXJfY3JlYXRlZCkgJT4lIAogIGFycmFuZ2UoeWVhcl9jcmVhdGVkKQpgYGAKCmBgYHtyIGV2YWwgPSBGQUxTRX0KIyBvciwgYmVjYXVzZSBhcnRpc3RfZ2VuZGVyIGlzIG1pc3Npbmcgd2hlbiBudW1fYXJ0aXN0cyA+IDEKbW9tYSAlPiUgCiAgZmlsdGVyKGFydGlzdF9nZW5kZXIgPT0gIkZlbWFsZSIpICU+JSAKICBzZWxlY3QodGl0bGUsIGFydGlzdCwgeWVhcl9hY3F1aXJlZCwgeWVhcl9jcmVhdGVkKSAlPiUgCiAgYXJyYW5nZSh5ZWFyX2FjcXVpcmVkKQpgYGAKCiMgQmFzaWNzIG9mIGBnZ3Bsb3QyYAoKPGRpdiBjbGFzcz0icGFuZWwgcGFuZWwtc3VjY2VzcyI+CiAgPGRpdiBjbGFzcz0icGFuZWwtaGVhZGluZyI+Q2hhbGxlbmdlICMyOjwvZGl2PgogIDxkaXYgY2xhc3M9InBhbmVsLWJvZHkiPgpXZSdsbCBkbyB0aGlzIHRvZ2V0aGVyICoobm90aGluZyB0byB0dXJuIGluKSo6IHNlZSBbc2xpZGVzXShodHRwczovL3N0ZXZlbmJlZHJpY2suZ2l0aHViLmlvL2RhdGEtdmlzLWxhYnMtMjAyMy9zbGlkZXMvMDItc2xpZGVzLmh0bWwjMTYpLgogIDwvZGl2Pgo8L2Rpdj4KCgoKIyBQbG90IHlvdXIgZGF0YQoKCgojIyBQbG90IHllYXIgcGFpbnRlZCB2cyB5ZWFyIGFjcXVpcmVkCgogCgoKCjxkaXYgY2xhc3M9InBhbmVsIHBhbmVsLXN1Y2Nlc3MiPgogIDxkaXYgY2xhc3M9InBhbmVsLWhlYWRpbmciPkNoYWxsZW5nZSAjMzo8L2Rpdj4KICA8ZGl2IGNsYXNzPSJwYW5lbC1ib2R5Ij4KTGV0J3MgcmVjcmVhdGUgdGhpcyBwbG90IGZyb20gW2ZpdmV0aGlydHllaWdodF0oaHR0cHM6Ly9maXZldGhpcnR5ZWlnaHQuY29tL2ZlYXR1cmVzL2EtbmVyZHMtZ3VpZGUtdG8tdGhlLTIyMjktcGFpbnRpbmdzLWF0LW1vbWEvKSAobW9zdGx5KSEKCiFbXShodHRwczovL2ZpdmV0aGlydHllaWdodC5jb20vd3AtY29udGVudC91cGxvYWRzLzIwMTUvMDgvcm9lZGVyLWZlYXR1cmUtbW9tYS0xLnBuZz93PTExNTApCgpUaGluZ3MgdG8gY29uc2lkZXI6CgotIFlvdSdsbCB3YW50IHRvIHBsYXkgYXJvdW5kIHdpdGggc2V0dGluZyBhbiBgYWxwaGFgIHZhbHVlIGhlcmUtIGtlZXAgaW4gbWluZCB0aGF0IGAwYCBpcyB0b3RhbGx5IHRyYW5zcGFyZW50IGFuZCBgMWAgaXMgb3BhcXVlLiAKLSBUcnkgdXNpbmcgYGdlb21fYWJsaW5lKClgIHRvIGFkZCB0aGUgbGluZSBpbiByZWQgKHVzZSB0aGUgZGVmYXVsdCBpbnRlcmNlcHQgdmFsdWUgb2YgMCkuIFRoZSBhY3R1YWwgcmVkIGxpbmUgaXMgZGlmZmljdWx0IHRvIHJlY3JlYXRlLSBoZXJlIGlzIHdoYXQgdGhlIGF1dGhvcnMgc2F5OiAiVGhlIHJlZCByZWdyZXNzaW9uIGxpbmUgc2hvd3MgdGhlIOKAnG1vZGVybml6aW5n4oCdIG9mIE1vTUHigJlzIGNvbGxlY3Rpb24g4oCUIGhvdyBxdWlja2x5IHRoZSBtdXNldW0gaGFzIG1vdmVkIHRvd2FyZCBhY3F1aXJpbmcgcmVjZW50IHBhaW50aW5ncy4iCi0gR28gYmFjayB0byBbTGFiIDAxXShodHRwczovL3N0ZXZlbmJlZHJpY2suZ2l0aHViLmlvL2RhdGEtdmlzLWxhYnMtMjAyMy8wMS1lZGFfaG90X2RvZ3MuaHRtbCkgdG8gcmV2aWV3IGhvdyB0byBkbyB0aGUgZm9sbG93aW5nOgogICAgLSBDaGFuZ2UgdGhlIHgtIGFuZCB5LWF4aXMgbGFiZWxzIGFuZCB0aGUgcGxvdCB0aXRsZSB0byBtYXRjaCB0aGUgcGxvdCBhYm92ZQogIDwvZGl2Pgo8L2Rpdj4KCgpgYGB7cn0KZ2dwbG90KG1vbWEsIGFlcyh5ZWFyX2NyZWF0ZWQsIHllYXJfYWNxdWlyZWQpKSArCiAgZ2VvbV9wb2ludChhbHBoYSA9IC4xLCBuYS5ybSA9IFRSVUUpICsKICBnZW9tX2FibGluZShpbnRlcmNlcHQgPSBjKDAsMCksIGNvbG91ciA9ICJyZWQiKSArCiAgbGFicyh4ID0gIlllYXIgUGFpbnRlZCIsIHkgPSAiWWVhciBBY3F1aXJlZCIpICsKICBnZ3RpdGxlKCJNb01BIEtlZXBzIEl0cyBDb2xsZWN0aW9uIEN1cnJlbnQiKSAKYGBgCgoKCiMjIEZhY2V0IGJ5IGFydGlzdCBnZW5kZXIKCkNhbiB5b3UgbWFrZSB0aGUgc2FtZSBwbG90IGFib3ZlLCBidXQgZmFjZXQgYnkgYXJ0aXN0IGdlbmRlcj8gCgo8cCBjbGFzcz0idGV4dC1pbmZvIj4gX19IaW50Ol9fIEZvciB0aGlzIHRvIG1ha2Ugc2Vuc2UsIHlvdSBwcm9iYWJseSB3YW50IHRvIGRvIHNvbWUgZmlsdGVyaW5nIHRvIHNlbGVjdCBvbmx5IHRob3NlIHBhaW50aW5ncyB3aGVyZSB0aGVyZSB3YXMgb25lICJzb2xvIiBhcnRpc3QuPC9wPgoKYGBge3J9Cm1vbWFfc29sbyA8LSBtb21hICU+JSAKICBmaWx0ZXIobnVtX2FydGlzdHMgPT0gMSkKZ2dwbG90KG1vbWFfc29sbywgYWVzKHllYXJfY3JlYXRlZCwgeWVhcl9hY3F1aXJlZCkpICsKICBnZW9tX3BvaW50KGFscGhhID0gLjEpICsKICBnZW9tX2FibGluZShpbnRlcmNlcHQgPSBjKDAsMCksIGNvbG91ciA9ICJyZWQiKSArCiAgbGFicyh4ID0gIlllYXIgUGFpbnRlZCIsIHkgPSAiWWVhciBBY3F1aXJlZCIpICsKICBnZ3RpdGxlKCJNb01BIEtlZXBzIEl0cyBDb2xsZWN0aW9uIEN1cnJlbnQiKSArCiAgZmFjZXRfd3JhcCh+YXJ0aXN0X2dlbmRlcikKYGBgCgoKIyBQbG90IHBhaW50aW5nIGRpbWVuc2lvbnMKCjxkaXYgY2xhc3M9InBhbmVsIHBhbmVsLXN1Y2Nlc3MiPgogIDxkaXYgY2xhc3M9InBhbmVsLWhlYWRpbmciPkNoYWxsZW5nZSAjNDo8L2Rpdj4KICA8ZGl2IGNsYXNzPSJwYW5lbC1ib2R5Ij4KTGV0J3MgKHNvbWV3aGF0KSB0cnkgdG8gcmVjcmVhdGUgdGhpcyBzY2F0dGVycGxvdCBmcm9tIFtmaXZldGhpcnR5ZWlnaHRdKGh0dHBzOi8vZml2ZXRoaXJ0eWVpZ2h0LmNvbS9mZWF0dXJlcy9hLW5lcmRzLWd1aWRlLXRvLXRoZS0yMjI5LXBhaW50aW5ncy1hdC1tb21hLykuIAoKCiFbXShodHRwczovL2ZpdmV0aGlydHllaWdodC5jb20vd3AtY29udGVudC91cGxvYWRzLzIwMTUvMDgvcm9lZGVyLWZlYXR1cmUtbW9tYS0zLnBuZz93PTExNTApCgpUbyByZWNyZWF0ZSwgc29tZSB0aGluZ3MgdG8gY29uc2lkZXI6CgotIFRyeSBmaWx0ZXJpbmcgYWxsIHBhaW50aW5ncyB3aXRoIGhlaWdodCBsZXNzIHRoYW4gNjAwIGNtIGFuZCB3aWR0aCBsZXNzIHRoYW4gNzYwIGNtLiAKLSBJZiB5b3Ugd2FudCB0byBhZGQgY29sb3IgYXMgaW4gdGhlIG9yaWdpbmFsLCB5b3UnbGwgbmVlZCB0byBjcmVhdGUgYSBuZXcgdmFyaWFibGUgdXNpbmcgYG11dGF0ZWAuIAoKCjxwIGNsYXNzPSJ0ZXh0LWluZm8iPiBfX0hpbnQ6X18gWW91J2xsIHByb2JhYmx5IGFsc28gd2FudCB0byBsb29rIGludG8gYGNhc2Vfd2hlbmAgdG8gY3JlYXRlIGEgY2F0ZWdvcmljYWwgdmFyaWFibGUgdG8gY29sb3IgYnkuPC9wPgogIDwvZGl2Pgo8L2Rpdj4KCgoKCgoKCmBgYHtyfQptb21hX2RpbSA8LSBtb21hICU+JSAKICBmaWx0ZXIoaGVpZ2h0X2NtIDwgNjAwLCB3aWR0aF9jbSA8IDc2MCkgJT4lIAogIG11dGF0ZShod19yYXRpbyA9IGhlaWdodF9jbSAvIHdpZHRoX2NtLAogICAgICAgICBod19jYXQgPSBjYXNlX3doZW4oCiAgICAgICAgICAgaHdfcmF0aW8gPiAxIH4gInRhbGxlciB0aGFuIHdpZGUiLAogICAgICAgICAgIGh3X3JhdGlvIDwgMSB+ICJ3aWRlciB0aGFuIHRhbGwiLAogICAgICAgICAgIGh3X3JhdGlvID09IDEgfiAicGVyZmVjdCBzcXVhcmUiCiAgICAgICAgICkpCmxpYnJhcnkoZ2d0aGVtZXMpCmdncGxvdChtb21hX2RpbSwgYWVzKHggPSB3aWR0aF9jbSwgeSA9IGhlaWdodF9jbSwgY29sb3VyID0gaHdfY2F0KSkgKwogIGdlb21fcG9pbnQoYWxwaGEgPSAuNSkgKwogIGdndGl0bGUoIk1vTUEgUGFpbnRpbmdzLCBUYWxsIGFuZCBXaWRlIikgKwogIHNjYWxlX2NvbG91cl9tYW51YWwobmFtZSA9ICIiLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWVzID0gYygiZ3JheTUwIiwgIiNGRjk5MDAiLCAiI0IxNENGMCIpKSArCiAgdGhlbWVfZml2ZXRoaXJ0eWVpZ2h0KCkgKwogIHRoZW1lKGF4aXMudGl0bGUgPSBlbGVtZW50X3RleHQoKSkgKwogIGxhYnMoeCA9ICJXaWR0aCIsIHkgPSAiSGVpZ2h0IikgCmBgYAoKClRob3NlIGNvbG9ycyBhcmUgaW50ZW5zZSEgV291bGQgZGlmZmVyZW50IG9uZXMgd29yayBiZXR0ZXI/CgpgYGB7cn0KbGlicmFyeShnZ3RoZW1lcykKZ2dwbG90KG1vbWFfZGltLCBhZXMoeCA9IHdpZHRoX2NtLCB5ID0gaGVpZ2h0X2NtLCBjb2xvdXIgPSBod19jYXQpKSArCiAgZ2VvbV9wb2ludChhbHBoYSA9IC41KSArCiAgZ2d0aXRsZSgiTW9NQSBQYWludGluZ3MsIFRhbGwgYW5kIFdpZGUiKSArCiAgc2NhbGVfY29sb3VyX21hbnVhbChuYW1lID0gIiIsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMgPSBjKCJncmF5NTAiLCAiI2VlNTg2MyIsICIjNjk5OWNkIikpICsKICB0aGVtZV9maXZldGhpcnR5ZWlnaHQoKSArCiAgdGhlbWUoYXhpcy50aXRsZSA9IGVsZW1lbnRfdGV4dCgpKSArCiAgbGFicyh4ID0gIldpZHRoIiwgeSA9ICJIZWlnaHQiKSAKYGBgCgpXZSBjb3VsZCBhbHNvIGRvIGF3YXkgd2l0aCB0aGUgbGVnZW5kIGFuZCB1c2UgYGdlb21fYW5ub3RhdGVgIGluc3RlYWQuCgpgYGB7cn0KbGlicmFyeShnZ3RoZW1lcykKZ2dwbG90KG1vbWFfZGltLCBhZXMoeCA9IHdpZHRoX2NtLCB5ID0gaGVpZ2h0X2NtLCBjb2xvdXIgPSBod19jYXQpKSArCiAgZ2VvbV9wb2ludChhbHBoYSA9IC41LCBzaG93LmxlZ2VuZCA9IEZBTFNFKSArCiAgZ2d0aXRsZSgiTW9NQSBQYWludGluZ3MsIFRhbGwgYW5kIFdpZGUiKSArCiAgc2NhbGVfY29sb3VyX21hbnVhbChuYW1lID0gIiIsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMgPSBjKCJncmF5NTAiLCAiI2VlNTg2MyIsICIjNjk5OWNkIikpICsKICB0aGVtZV9maXZldGhpcnR5ZWlnaHQoKSArCiAgdGhlbWUoYXhpcy50aXRsZSA9IGVsZW1lbnRfdGV4dCgpKSArCiAgbGFicyh4ID0gIldpZHRoIiwgeSA9ICJIZWlnaHQiKSArCiAgYW5ub3RhdGUoeCA9IDIwMCwgeSA9IDM4MCwgZ2VvbSA9ICJ0ZXh0IiwgCiAgICAgICAgICAgbGFiZWwgPSAiVGFsbGVyIHRoYW5cbldpZGUiLCBjb2xvciA9ICIjZWU1ODYzIiwgCiAgICAgICAgICAgc2l6ZSA9IDUsIGZhbWlseSA9ICJMYXRvIiwgaGp1c3QgPSAxLCBmb250ZmFjZSA9IDIpICsKICAgIGFubm90YXRlKHggPSAzNzUsIHkgPSAxMDAsIGdlb20gPSAidGV4dCIsIAogICAgICAgICAgICAgbGFiZWwgPSAiV2lkZXIgdGhhblxuVGFsbCIsIGNvbG9yID0gIiM2OTk5Y2QiLCAKICAgICAgICAgICAgIHNpemUgPSA1LCBmYW1pbHkgPSAiTGF0byIsIGhqdXN0ID0gMCwgZm9udGZhY2UgPSAyKQpgYGAKCiMgUGxvdCBzb21ldGhpbmcgbmV3ICYgZGlmZmVyZW50IQoKPGRpdiBjbGFzcz0icGFuZWwgcGFuZWwtc3VjY2VzcyI+CiAgPGRpdiBjbGFzcz0icGFuZWwtaGVhZGluZyI+Q2hhbGxlbmdlICM1OjwvZGl2PgogIDxkaXYgY2xhc3M9InBhbmVsLWJvZHkiPgpJdCBjYW4gYmUgYW55dGhpbmctIHlvdSBjYW4gY2hhbmdlIGNvbG9ycywgYWRkIGFubm90YXRpb25zLCBzd2l0Y2ggdGhlIGdlb21zLCBhZGQgbmV3IHZhcmlhYmxlcyB0byBleGFtaW5lLSB0aGUgd29ybGQgaXMgeW91ciBveXN0ZXIhIFRoZSBvbmx5IHJlcXVpcmVtZW50cyBhcmU6CgoxLiBZb3UgKm1ha2UqIG9uZSBuZXcgcGxvdCB0aGF0IGlzIG9yaWdpbmFsLCBhbmQgCjIuIFlvdSAqd3JpdGUqIDEtMiBzZW50ZW5jZXMgdG8gcHJlc2VudCB0aGUgcGxvdCBhbmQgd2h5IGl0IG1ha2VzIHNlbnNlLiBXaGF0IHF1ZXN0aW9ucyBkbyB5b3UgdGhpbmsgeW91ciBwbG90IGNhbiBoZWxwIHlvdSB0byBhbnN3ZXI/CgpJdCBkb2VzIG5vdCBoYXZlIHRvIGJlIHByZXR0eSByaWdodCBub3csIGJ1dCBpdCBtdXN0IG1ha2Ugc2Vuc2UgYXMgYSB2aXN1YWxpemF0aW9uLSB5b3UgbXVzdCBiZSBhYmxlIHRvIGludGVsbGlnZW50bHkgYW5kIHN1Y2NpbnRseSB0ZWxsIHVzIGFib3V0IGl0IGluIHJlYWwgd29yZHMuCiAgPC9kaXY+CjwvZGl2PgoKCgoKCg==</div>
<p>
<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">
<img alt="Creative Commons License" style="border-width:0" src="by-nc.png" width="133" height="25"/></a>
</p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("02-moma.Rmd");
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
